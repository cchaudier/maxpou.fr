{"componentChunkName":"component---node-modules-gatsby-starter-morning-dew-src-templates-blog-post-js","path":"/rest-crud","result":{"data":{"post":{"excerpt":"Bref rappel des méthodes HTTP Pour rappel, voici les principaux verbes HTTP que nous utilisons pour des architectures REST : GET : Accède à…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"post\",\n  \"title\": \"REST, CRUD et bonnes pratiques\",\n  \"description\": \"Guide de bonnes pratiques pour les API REST CRUD\",\n  \"date\": \"2015-09-15T00:00:00.000Z\",\n  \"slug\": \"rest-crud\",\n  \"tags\": [\"REST\", \"HTTP\"],\n  \"cover\": \"./abstract-5.jpg\",\n  \"generate-card\": false\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"bref-rappel-des-méthodes-http\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#bref-rappel-des-m%C3%A9thodes-http\",\n    \"aria-label\": \"bref rappel des méthodes http permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Bref rappel des m\\xE9thodes HTTP\"), mdx(\"p\", null, \"Pour rappel, voici les principaux verbes HTTP que nous utilisons pour des architectures REST :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"GET : Acc\\xE8de \\xE0 une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"HEAD : Acc\\xE8de aux m\\xE9tadonn\\xE9es d\\u2019une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST : Ajoute une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT : Met \\xE0 jour une ressource \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"compl\\xE8te\"), \" en la rempla\\xE7ant par une nouvelle version (99% des cas).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PATCH : Met \\xE0 jour une partie d\\u2019une ressource en envoyant un diff\\xE9rentiel (une sorte de \\u2018git diff\\u2019)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"DELETE : Supprime une ressource\")), mdx(\"h2\", {\n    \"id\": \"méthodes-safes-sûres-et-idempotents-idempotentes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#m%C3%A9thodes-safes-s%C3%BBres-et-idempotents-idempotentes\",\n    \"aria-label\": \"méthodes safes sûres et idempotents idempotentes permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"M\\xE9thodes safes (s\\xFBres) et idempotents (idempotentes)\"), mdx(\"p\", null, \"La \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://tools.ietf.org/html/rfc7231#section-4.2\"\n  }), \"RFC7231\"), \" (rempla\\xE7ante de la RFC2616) a ajout\\xE9 deux notions aux m\\xE9thodes HTTP :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Les m\\xE9thodes dites \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"safes\"), \" ne modifient pas les donn\\xE9es sur le serveur. Peu importe le nombre de fois qu\\u2019elles sont appel\\xE9es.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Les m\\xE9thodes \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"idempotents\"), \" quant \\xE0 elles \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"peuvent\"), \" modifier les donn\\xE9es lors du premier appel. Lors des appels suivants, la r\\xE9ponse sera tout le temps identique. En cas de panne/probl\\xE8me r\\xE9seau, vous pourrez donc lancer la requ\\xEAte sans craintes puisque le comportement est le m\\xEAme que vous ex\\xE9cutiez la requ\\xEAte une ou plusieurs fois.\")), mdx(\"p\", null, \"M\\xE9thode | Safe | Idempotente\\nGET     | Oui  | Oui\\nHEAD    | Oui  | Oui\\nPOST    | Non  | Non\\nPUT     | Non  | Oui\\nPATCH   | Non  | Non\\nDELETE  | Non  | Oui\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Focus sur le DELETE :\"), \" On serait tent\\xE9 de dire que DELETE n\\u2019est pas idempotent car on ne peut pas supprimer deux fois le m\\xEAme objet. Ceci \\xE9tant, si l\\u2019on regarde la RFC, DELETE doit bien retourner un code 200 (Success) en cas de r\\xE9ussite et non pas un 204 (No Content). Si l\\u2019API n\\u2019a pas \\xE9t\\xE9 bien con\\xE7ue et qu\\u2019elle renvoie un 404 (Not Found), alors le DELETE ne sera plus idempotent comme elle devrait l\\u2019\\xEAtre.\"), mdx(\"h2\", {\n    \"id\": \"cachabilité\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#cachabilit%C3%A9\",\n    \"aria-label\": \"cachabilité permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Cachabilit\\xE9\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201CLa requ\\xEAte la plus performante est celle que l\\u2019on a pas \\xE0 faire !\\u201D\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\u2014 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Un inconnu\"))), mdx(\"p\", null, \"La mise en cache est l\\u2019une des contraintes les plus importantes des architectures web. En effet, elle permet de :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"d\\xE9charger votre serveur en lui \\xE9vitant de refaire la m\\xEAme chose deux fois,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"r\\xE9duire le temps de traitement d\\u2019une requ\\xEAte,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u2026et donc de renvoyer plus rapidement l\\u2019information au client.\")), mdx(\"p\", null, \"Les m\\xE9thodes dites \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"safes\"), \" sont donc \\xE0 mettre en cache !\"), mdx(\"h2\", {\n    \"id\": \"bonnesmauvaises-pratiques\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#bonnesmauvaises-pratiques\",\n    \"aria-label\": \"bonnesmauvaises pratiques permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Bonnes/mauvaises pratiques\"), mdx(\"p\", null, \"Il y a malheureusement, trop d\\u2019API con\\xE7ue comme ceci :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-text\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"POST api.mon-application.org/utilisateurs/rechercher  \\nPOST api.mon-application.org/utilisateurs/42/supprimer  \\nPOST api.mon-application.org/utilisateurs/42/modifier  \\nGET api.mon-application.org/utilisateurs/supprimer?id=42  \\nGET api.mon-application.org/utilisateurs/42?action=supprimer  \\nGET api.mon-application.org/utilisateurs/42?action=envoyerMailConfirmation  \\n...  \"))), mdx(\"p\", null, \"Ce sont de mauvaises pratiques li\\xE9es \\xE0 une mauvaise compr\\xE9hension des verbes HTTP. Quand il y a un nom d\\u2019action CRUD dans l\\u2019URI c\\u2019est qu\\u2019il y a un probl\\xE8me.\\nDe plus, dans la partie pr\\xE9c\\xE9dente, je parle de cachabilit\\xE9. Si vous faites une recherche avec POST, le serveur n\\u2019utilisera pas le cache\\u2026 mais il le mettra peut-\\xEAtre \\xE0 jour (pour d\\u2019\\xE9ventuels GET \\xE0 venir qui ne viendront jamais).\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Si vous utilisez un POST au lieu d\\u2019un PUT (ou autre m\\xE9thode idempotent) et que par m\\xE9garde, vous ex\\xE9cutez cet appel plusieurs fois, il peut y avoir des effets de bords non d\\xE9sir\\xE9s.  \"), mdx(\"h2\", {\n    \"id\": \"création-post-vs-put\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#cr%C3%A9ation-post-vs-put\",\n    \"aria-label\": \"création post vs put permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Cr\\xE9ation POST vs. PUT\"), mdx(\"p\", null, \"Lors d\\u2019une cr\\xE9ation de ressource, il y a deux cas de figure : le serveur a la main sur la g\\xE9n\\xE9ration de l\\u2019id (ou du nom de la ressource) ou bien le cas contraire. Dans le premier cas, il faut privil\\xE9gier le POST et dans l\\u2019autre le PUT. En d\\u2019autres termes, n\\u2019utilisez PUT pour la cr\\xE9ation uniquement si c\\u2019est au client connait l\\u2019URI de la ressource \\xE0 cr\\xE9er.\"), mdx(\"p\", null, \"Exemple avec les ressources subordonn\\xE9es.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"42\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"calzone\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"price\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"$12\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"ingredients\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"4\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"tomato sauce\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"8\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"ham\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"15\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"egg\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"16\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"basil leaves\\\"\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"...\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\")))), mdx(\"p\", null, \"Nous avons une ressource comme celle ci-dessus et que nous voulons ajouter un ingr\\xE9dient. Il pourrait-\\xEAtre tentant de faire un PUT sur la ressource enti\\xE8re.\\nPourtant un ingr\\xE9dient est\\u2026 aussi une ressource ! Il faudra donc faire :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-text\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"PUT http://api.example.com/pizzas/calzone/ingredients/<idIngredient>\"))), mdx(\"p\", null, \"En effet, ici POST pas possible car un ingr\\xE9dient peut se retrouver dans plusieurs pizzas. Dans le cas contraire, un POST aurait \\xE9t\\xE9 utilis\\xE9 comme ceci :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-text\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"POST http://api.example.com/pizzas/calzone/ingredients/\"))), mdx(\"h2\", {\n    \"id\": \"le-cas-des-modifications-partielles\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#le-cas-des-modifications-partielles\",\n    \"aria-label\": \"le cas des modifications partielles permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Le cas des modifications partielles\"), mdx(\"p\", null, \"Si on regarde le panel de m\\xE9thodes HTTP, on voit qu\\u2019il y a deux m\\xE9thodes pour modifier une ressource : PUT et PATCH. Si vous vous souvenez bien GET requi\\xE8re une ressource enti\\xE8re et PATCH effectue un diff\\xE9rentiel (avec les anciennes donn\\xE9es). Donc dans les deux cas vous \\xEAtes oblig\\xE9s de faire un GET avant.\"), mdx(\"p\", null, \"L\\xE0, je vous vois venir :\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201COn a qu\\u2019\\xE0 faire un PUT partiel et puis c\\u2019est tout !\\u201D\")), mdx(\"p\", null, \"Et bien non ! Comme le dit si bien le papa de REST, un PUT partiel n\\u2019est pas compatible avec une API RESTful. Par extension, il en va de m\\xEAme pour le POST partiel.  \"), mdx(\"blockquote\", {\n    className: \"twitter-tweet\",\n    lang: \"fr\"\n  }, mdx(\"p\", {\n    lang: \"en\",\n    dir: \"ltr\"\n  }, mdx(\"a\", {\n    href: \"https://twitter.com/mnot\"\n  }, \"@mnot\"), \" Oy, yes, PATCH was something I created for the initial HTTP/1.1 proposal because partial PUT is never RESTful. ;-)\"), \"\\u2014 Roy T. Fielding (@fielding) \", mdx(\"a\", {\n    href: \"https://twitter.com/fielding/status/275471320685367296\"\n  }, \"3 D\\xE9cembre 2012\")), mdx(\"script\", {\n    async: true,\n    src: \"//platform.twitter.com/widgets.js\",\n    charSet: \"utf-8\"\n  }), mdx(\"p\", null, \"Bref, c\\u2019est toujours le m\\xEAme probl\\xE8me qui revient : \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Th\\xE9orie Vs. Pragmatisme\"), \" :  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Soit vous collez \\xE0 fond \\xE0 la spec HTTP pour avoir une vrai API REST et utilisez PATCH ;\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Soit vous oubliez avoir lu cet article et continuez d\\u2019utiliser un POST/PUT partiel. Mais votre API ne sera pas pleinement REST ;-)\")), mdx(\"h2\", {\n    \"id\": \"sortir-du-cadre-crud\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#sortir-du-cadre-crud\",\n    \"aria-label\": \"sortir du cadre crud permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Sortir du cadre CRUD\"), mdx(\"p\", null, \"M\\xEAme si ce n\\u2019est pas l\\u2019objet de cet article, je vais tout de m\\xEAme en parler un peu, car contrairement \\xE0 ce que certains pensent, il est possible de sortir du cadre CRUD avec une API REST. Vous devrez alors utiliser la m\\xE9thode POST, et ainsi profiter du caract\\xE8re unsafe/non-idempotent de cette derni\\xE8re. Utiliser POST vous prot\\xE8ge d\\u2019effets de bord \\xE9voqu\\xE9s pr\\xE9c\\xE9demment (ex : retirer deux fois l\\u2019argent sur le compte d\\u2019un client, double envoi de mail, \\u2026).\"), mdx(\"p\", null, \"Exemple : \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"POST api.mon-application.org/utilisateurs/42/envoyer-mail-confirmation\"), \"  \"), mdx(\"p\", null, \"N\\u2019oubliez pas que c\\u2019est un \\xE9change entre le client et le serveur. Par cons\\xE9quent, il doit y avoir une r\\xE9ponse. R\\xE9ponse qui se mat\\xE9rialise dans le cas pr\\xE9sent par des \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.restapitutorial.com/httpstatuscodes.html\"\n  }), \"codes\"), \". Dans le cas pr\\xE9sent, il faudra renvoyer un \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"204 No Content\"), \".\"), mdx(\"h2\", {\n    \"id\": \"sources\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#sources\",\n    \"aria-label\": \"sources permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Sources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Si vous voulez en savoir plus sur l\\u2019utilisation de PATCH, je vous recommande cet article : \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"williamdurand.fr/2014/02/14/please-do-not-patch-like-an-idiot/\"\n  }), \"blog de William DURAND - Please do not PATCH like an idiot\"), \" d\\xE9di\\xE9 \\xE0 ce sujet.  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"J\\u2019ai r\\xE9cement d\\xE9couvert cet ouvrage : \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://shop.oreilly.com/product/0636920021575.do\"\n  }), \"REST API Design Rulebook (Mark Masse)\"), \". C\\u2019est une v\\xE9ritable mine d\\u2019or. Si vous vous posez des questions du type : quel code HTTP retourner ? Quelle forme d\\u2019URL est la plus judicieuse ? Ai-je le droit de faire xxx ? \\u2026 ce livre est fait pour vous !  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enfin, le \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://restcookbook.com\"\n  }), \"restcookbook\"), \" et l\\u2019article de \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://jasonsirota.com/rest-partial-updates-use-post-put-or-patch\"\n  }), \"Jason Sirota : REST Partial Updates: Use POST, PUT or PATCH?\"), \" m\\u2019ont beaucoup aid\\xE9.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"REST, CRUD et bonnes pratiques","date":"2015-09-15T00:00:00.000Z","slug":"rest-crud","language":null,"tags":["REST","HTTP"],"cover":{"publicURL":"/static/eec960b0c4fdc35fe78d195d1d7b8287/abstract-5.jpg"},"imageShare":null,"translations":null}}},"pageContext":{"slug":"rest-crud","previous":{"fileAbsolutePath":"/home/travis/build/maxpou/maxpou.fr/content/posts/2015/2015-08-14-atom/index.md","frontmatter":{"title":"Atom, un éditeur qui vous veut du bien","slug":"atom","tags":["Tool"],"language":"fr","cover":{"publicURL":"/static/9cfc3ee2778c9affa1906d93250e37f3/atom-mark.png"},"unlisted":null},"timeToRead":4,"excerpt":"18/11/2016  : ajout de ma configuration perso + quelques plugins 26/08/2015  : ajout de la gestion des favoris 24/11/2015  : l'éditeur est…"},"next":{"fileAbsolutePath":"/home/travis/build/maxpou/maxpou.fr/content/posts/2015/2015-10-21-a-la-decouverte-d-apispark/index.md","frontmatter":{"title":"A la découverte d'APISpark","slug":"a-la-decouverte-d-apispark","tags":["Tool","REST"],"language":"fr","cover":{"publicURL":"/static/370725a20af921ec833145c6acb058a6/background.png"},"unlisted":null},"timeToRead":3,"excerpt":"TL;DR J'ai découvert cet outil suite à la présentation de  @jplegoff  lors d'un instant technique chez Conserto.\n APISpark  est une…"}}}}